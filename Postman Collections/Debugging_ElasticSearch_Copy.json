{
  "info": {
    "_postman_id": "11342e35-4dd0-44ac-bb2e-15aee2d42ccc",
    "name": "Debugging ElasticSearch Copy",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Retrieve Collection with UID",
      "_postman_id": "81f36896-8eaf-4f61-8c7f-eb8c8bc4b65a",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "url": "https://{{es_host}}/{{index}}/collection/1201087-8abcfe72-d16f-4f58-2802-31b03f929b63"
      },
      "response": [
        {
          "id": "62df283b-e3cd-4abb-89ff-176631c1c891",
          "name": "200",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": "https://pathfinder:C14BweqXFDPGOrrHplaDjIIpYWIPw88vgeBhm3ST9QPVnHt7Xu98x5sCsrfpP18L@es-search-prod-a.getpostman.com/universal_search/collection/1201087-8abcfe72-d16f-4f58-2802-31b03f929b63"
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Access-Control-Allow-Origin",
              "value": "*",
              "name": "Access-Control-Allow-Origin",
              "description": ""
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "name": "Connection",
              "description": ""
            },
            {
              "key": "Content-Encoding",
              "value": "gzip",
              "name": "Content-Encoding",
              "description": ""
            },
            {
              "key": "Content-Length",
              "value": "292",
              "name": "Content-Length",
              "description": ""
            },
            {
              "key": "Content-Type",
              "value": "application/json; charset=UTF-8",
              "name": "Content-Type",
              "description": ""
            },
            {
              "key": "Date",
              "value": "Wed, 04 Oct 2017 10:00:30 GMT",
              "name": "Date",
              "description": ""
            },
            {
              "key": "Server",
              "value": "nginx/1.10.1",
              "name": "Server",
              "description": ""
            }
          ],
          "cookie": [],
          "responseTime": null,
          "body": "{\"_index\":\"universal_search\",\"_type\":\"collection\",\"_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_version\":1,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"found\":true,\"_source\":{\"category\":\"collection\",\"id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"name\":\"Melody\",\"description\":\"An internal service to collect data from our clients.\\n\\nhttps://github.com/Spuul/melody\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\"],\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"shared\":false,\"level\":\"0\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}}"
        }
      ]
    },
    {
      "name": "Full Text Search - Search by user id",
      "_postman_id": "c6651190-4693-4cc6-9392-f6183449dbb6",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"query\": {\n    \"bool\": {\n      \"must\": {\n        \"match_phrase\": {\n          \"mock_id\": \"wootidofthemockbeinghit\"\n        }\n      }\n    }\n  }\n}"
        },
        "url": "http://{{es_host}}/_search"
      },
      "response": [
        {
          "id": "274ca6c7-529b-498c-a044-067c387f7bbb",
          "name": "200",
          "originalRequest": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"query\" : {\n        \"match\" : {\n            \"user_id\" : \"1201087\"\n        }\n    }\n}"
            },
            "url": "https://pathfinder:C14BweqXFDPGOrrHplaDjIIpYWIPw88vgeBhm3ST9QPVnHt7Xu98x5sCsrfpP18L@es-search-prod-a.getpostman.com/_search"
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Access-Control-Allow-Origin",
              "value": "*",
              "name": "Access-Control-Allow-Origin",
              "description": ""
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "name": "Connection",
              "description": ""
            },
            {
              "key": "Content-Encoding",
              "value": "gzip",
              "name": "Content-Encoding",
              "description": ""
            },
            {
              "key": "Content-Length",
              "value": "1249",
              "name": "Content-Length",
              "description": ""
            },
            {
              "key": "Content-Type",
              "value": "application/json; charset=UTF-8",
              "name": "Content-Type",
              "description": ""
            },
            {
              "key": "Date",
              "value": "Wed, 04 Oct 2017 10:01:33 GMT",
              "name": "Date",
              "description": ""
            },
            {
              "key": "Server",
              "value": "nginx/1.10.1",
              "name": "Server",
              "description": ""
            }
          ],
          "cookie": [],
          "responseTime": null,
          "body": "{\"took\":1,\"timed_out\":false,\"_shards\":{\"total\":1,\"successful\":1,\"failed\":0},\"hits\":{\"total\":100,\"max_score\":9.558761,\"hits\":[{\"_index\":\"universal_search\",\"_type\":\"collection\",\"_id\":\"1201087-6fbce0d5-6690-2610-c724-0c93541faca5\",\"_score\":9.558761,\"_routing\":\"1201087-6fbce0d5-6690-2610-c724-0c93541faca5\",\"_source\":{\"category\":\"collection\",\"id\":\"1201087-6fbce0d5-6690-2610-c724-0c93541faca5\",\"name\":\"test\",\"description\":\"test des\",\"id_path\":[\"1201087-6fbce0d5-6690-2610-c724-0c93541faca5\"],\"root_id\":\"1201087-6fbce0d5-6690-2610-c724-0c93541faca5\",\"shared\":false,\"level\":\"0\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"collection\",\"_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_source\":{\"category\":\"collection\",\"id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"name\":\"Melody\",\"description\":\"An internal service to collect data from our clients.\\n\\nhttps://github.com/Spuul/melody\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\"],\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"shared\":false,\"level\":\"0\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"request\",\"_id\":\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_source\":{\"category\":\"request\",\"description\":\"Every request should have a UUID to identify when the App opens\",\"id\":\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\",\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\"],\"name\":\"https://{{melody}}.spuul.com/application/session_token\",\"parent_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"url\":\"https://mstage.spuul.com/application/session_token\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"response\",\"_id\":\"1201087-2ebaccb6-6915-e9c0-c935-077a71f55195\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\",\"_source\":{\"id\":\"1201087-2ebaccb6-6915-e9c0-c935-077a71f55195\",\"name\":\"https://mstage.spuul.com/application/session_token\",\"originalRequest\":{\"method\":\"GET\",\"header\":[],\"body\":{\"mode\":\"raw\",\"raw\":\"\"},\"url\":\"https://mstage.spuul.com/application/session_token\",\"description\":\"Every request should have a UUID to identify when the App opens\",\"host\":\"mstage.spuul.com\",\"path\":\"/application/session_token\"},\"category\":\"response\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\",\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\"],\"parent_id\":\"1201087-fdb7c6c2-4fce-868b-7ed2-144b88177c5b\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"request\",\"_id\":\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_source\":{\"category\":\"request\",\"description\":\"Record an error event\",\"id\":\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\",\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\"],\"name\":\"https://{{melody}}.spuul.com/error\",\"parent_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"url\":\"https://{{melody}}.spuul.com/error\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"response\",\"_id\":\"1201087-84ff82ca-8ee9-c792-ba5e-b3df2457e89c\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\",\"_source\":{\"id\":\"1201087-84ff82ca-8ee9-c792-ba5e-b3df2457e89c\",\"name\":\"https://{{melody}}.spuul.com/error\",\"originalRequest\":{\"method\":\"POST\",\"header\":[],\"body\":{\"mode\":\"raw\",\"raw\":\"\"},\"url\":\"https://{{melody}}.spuul.com/error\",\"description\":\"Record an error event\",\"host\":\"\",\"path\":\"%7B%7Bmelody%7D%7D.spuul.com/error\"},\"category\":\"response\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\",\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\"],\"parent_id\":\"1201087-c69bfc74-40ab-c289-bb8c-92345985c93e\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"request\",\"_id\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_source\":{\"category\":\"request\",\"description\":\"Record events with associated application & session token.\",\"id\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\"],\"name\":\"https://{{melody}}.spuul.com/track?event={{event}}\",\"parent_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"url\":\"https://{{melody}}.spuul.com/track\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"response\",\"_id\":\"1201087-124b3144-b51d-122c-132c-5528a17a60da\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"_source\":{\"id\":\"1201087-124b3144-b51d-122c-132c-5528a17a60da\",\"name\":\"Empty body will fail\",\"originalRequest\":{\"method\":\"POST\",\"header\":[],\"body\":{\"mode\":\"raw\",\"raw\":\"\"},\"url\":\"https://{{melody}}.spuul.com/track\",\"description\":\"Record events with associated application & session token.\",\"host\":\"\",\"path\":\"%7B%7Bmelody%7D%7D.spuul.com/track\"},\"category\":\"response\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\"],\"parent_id\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"response\",\"_id\":\"1201087-26c92dba-b22f-cb77-a89b-1b819e1b13f5\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"_source\":{\"id\":\"1201087-26c92dba-b22f-cb77-a89b-1b819e1b13f5\",\"name\":\"Bodies that aren't valid JSON will fail\",\"originalRequest\":{\"method\":\"POST\",\"header\":[],\"body\":{\"mode\":\"raw\",\"raw\":\"\"},\"url\":\"https://{{melody}}.spuul.com/track\",\"description\":\"Record events with associated application & session token.\",\"host\":\"\",\"path\":\"%7B%7Bmelody%7D%7D.spuul.com/track\"},\"category\":\"response\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\"],\"parent_id\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}},{\"_index\":\"universal_search\",\"_type\":\"response\",\"_id\":\"1201087-4fa5e1ca-fa3b-ba7c-a797-79fcfdfd9c43\",\"_score\":9.558761,\"_routing\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"_parent\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"_source\":{\"id\":\"1201087-4fa5e1ca-fa3b-ba7c-a797-79fcfdfd9c43\",\"name\":\"Successful video.play track event\",\"originalRequest\":{\"method\":\"POST\",\"header\":[],\"body\":{\"mode\":\"raw\",\"raw\":\"\"},\"url\":\"https://{{melody}}.spuul.com/track\",\"description\":\"Record events with associated application & session token.\",\"host\":\"\",\"path\":\"%7B%7Bmelody%7D%7D.spuul.com/track\"},\"category\":\"response\",\"id_path\":[\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\"],\"parent_id\":\"1201087-af53e146-8eb5-4cae-3d80-0a9116aba12b\",\"root_id\":\"1201087-8abcfe72-d16f-4f58-2802-31b03f929b63\",\"level\":\"1\",\"team_id\":\"66499\",\"user_id\":\"1201087\"}}]}}"
        }
      ]
    },
    {
      "name": "Search on the name attribute",
      "_postman_id": "d390a4eb-03c5-42eb-ad9a-c27736f8b73c",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"query\" : {\n        \"match\" : {\n            \"name\" : \"melody\"\n        }\n    }\n}"
        },
        "url": "https://{{es_host}}/{{index}}/_search"
      },
      "response": []
    },
    {
      "name": "Aggreagtes by User Id",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "console.log(pm.response.json().aggregations.all_teams.buckets.length)",
              ""
            ]
          }
        }
      ],
      "_postman_id": "ed659b1e-ece4-4e05-9b3d-4c7d1e6cd46a",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"size\": 0,\n  \"aggs\": {\n    \"all_teams\": {\n      \"terms\": { \n      \t\"field\": \"user_id\", \n      \t\"size\": 10000\n      }\n    }\n  }\n}"
        },
        "url": "https://{{es_host}}/_search"
      },
      "response": []
    },
    {
      "name": "Aggreagtes by Team Id",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "console.log(pm.response.json().aggregations.all_teams.buckets.length)",
              ""
            ]
          }
        }
      ],
      "_postman_id": "b64078b4-4bf2-43f0-8331-eb33de88ea22",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"size\": 0,\n  \"aggs\": {\n    \"all_teams\": {\n      \"terms\": { \n      \t\"field\": \"team_id\", \n      \t\"size\": 10000\n      }\n    }\n  }\n}"
        },
        "url": "https://{{es_host}}/_search"
      },
      "response": []
    }
  ]
}